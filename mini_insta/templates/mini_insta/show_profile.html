<!--
    File: mini_insta/show_profile.html
    Description: template to display a chosen profile.
    Author: William Fugate wfugate@bu.edu
-->

{% extends 'mini_insta/base.html' %}

{% block content %}
    <h2>{{ profile.display_name }}</h2> <!--display the profile display name-->

    {% if profile.profile_image_url %} <!--check if profile image URL works and if so show it-->
        <img src="{{ profile.profile_image_url }}" alt="{{ profile.username }}'s profile image" width="200">
    {% else %}
        <p>No profile image</p>
    {% endif %}

    <p><strong>Username:</strong> {{ profile.username }}</p> <!-- display data of the profile-->
    <p><strong>Bio:</strong> {{ profile.bio_text }}</p>
    <p><strong>Joined:</strong> {{ profile.join_date }}</p>

    <h3>Stats</h3>
    <p>Followers: (coming soon)</p>
    <p>Following: (coming soon)</p>

    <h3>Posts</h3>
    {% for post in profile.get_all_posts %} <!--for each post, show it and its first photo-->
        <div>
            <p><strong>Posted on:</strong> {{ post.timestamp }}</p>
            
            {% with first_photo=post.get_all_photos.first %}
                {% if first_photo %}
                    <img src="{{ first_photo.image_url }}" alt="Post image" width="400">
                {% else %}
                    <img src="https://t4.ftcdn.net/jpg/04/70/29/97/360_F_470299797_UD0eoVMMSUbHCcNJCdv2t8B2g1GVqYgs.jpg" alt="No image available" width="400"> <!--placeholder image that says "no image"-->
                {% endif %}
            {% endwith %}
            
            {% if post.caption %}
                <p><strong>Caption:</strong> {{ post.caption }}</p>
            {% endif %}
        </div>
    {% empty %}
        <p>No posts yet.</p>
    {% endfor %}
{% endblock %}
